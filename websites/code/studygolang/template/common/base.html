<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>{{template "title" .}} | Golang China | Golang中文社区(Go语言构建) | Go语言学习园地</title>
    <link href="/static/css/front.css" media="screen" rel="stylesheet" type="text/css">
    {{template "css"}}
    <meta name="keywords" content="Golang,Go社区,Golang中文社区,Go语言学习,Go语言,学习Go语言,Go语言学习园地,Golang 中国,Golang中国,Golang China, Go语言论坛">
    <meta name="description" content="中国 Golang 社区，Go语言学习园地，致力于构建完善的 Golang 中文社区，Go语言爱好者的学习家园。完全Go语言实现。">
    <meta charset="utf-8">
    <meta name="baidu-site-verification" content="0wbCpHsoAy" />
    <link rel="shortcut icon" href="/static/img/go.ico">
    <style type="text/css">#yddContainer{display:block;font-family:Microsoft YaHei;position:relative;width:100%;height:100%;top:-4px;left:-4px;font-size:12px;border:1px solid}#yddTop{display:block;height:22px}#yddTopBorderlr{display:block;position:static;height:17px;padding:2px 28px;line-height:17px;font-size:12px;color:#5079bb;font-weight:bold;border-style:none solid;border-width:1px}#yddTopBorderlr .ydd-sp{position:absolute;top:2px;height:0;overflow:hidden}.ydd-icon{left:5px;width:17px;padding:0px 0px 0px 0px;padding-top:17px;background-position:-16px -44px}.ydd-close{right:5px;width:16px;padding-top:16px;background-position:left -44px}#yddKeyTitle{float:left;text-decoration:none}#yddMiddle{display:block;margin-bottom:10px}.ydd-tabs{display:block;margin:5px 0;padding:0 5px;height:18px;border-bottom:1px solid}.ydd-tab{display:block;float:left;height:18px;margin:0 5px -1px 0;padding:0 4px;line-height:18px;border:1px solid;border-bottom:none}.ydd-trans-container{display:block;line-height:160%}.ydd-trans-container a{text-decoration:none;}#yddBottom{position:absolute;bottom:0;left:0;width:100%;height:22px;line-height:22px;overflow:hidden;background-position:left -22px}.ydd-padding010{padding:0 10px}#yddWrapper{color:#252525;z-index:10001;background:url(chrome-extension://eopjamdnofihpioajgfdikhhbobonhbb/ab20.png);}#yddContainer{background:#fff;border-color:#4b7598}#yddTopBorderlr{border-color:#f0f8fc}#yddWrapper .ydd-sp{background-image:url(chrome-extension://eopjamdnofihpioajgfdikhhbobonhbb/ydd-sprite.png)}#yddWrapper a,#yddWrapper a:hover,#yddWrapper a:visited{color:#50799b}#yddWrapper .ydd-tabs{color:#959595}.ydd-tabs,.ydd-tab{background:#fff;border-color:#d5e7f3}#yddBottom{color:#363636}#yddWrapper{min-width:250px;max-width:400px;}
    .new sup {
      position: absolute;
      display: block;
      overflow: hidden;
      text-indent: -999px;
      width: 23px;
      height: 9px;
      top: 5px;
      right: 40px;
      background: url(http://p2.qhimg.com/t010131dd1959c9572b.png) no-repeat 0 0;
    }</style>
  </head>
  <body data-offset="50">
    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <h3>
            <a href="/"><img alt="Text_logo" src="/static/img/text_logo.png" style="width:123px;height:29px;"></a>
          </h3>
          <ul class="nav">
            <li class="first {{.activeTopics}}"><a href="/topics">社区</a></li><li><a href="/articles">博客</a></li><li class="{{.activeResources}}"><a href="/resources">资源</a></li><li class="{{.activeWiki}}"><a href="/wiki">Wiki</a></li><li class="{{.activeSites}}"><a href="/sites">酷站</a></li><li><a href="http://docs.studygolang.com">官方文档</a><li class="new"><a href="http://docscn.studygolang.com">中文文档</a><sup></sup></li><li class="last {{.activeUsers}}"><a href="/users">会员</a></li>
          </ul>
          <form action="/search" class="navbar-search pull-left" method="get">
            <input type="text" name="q" class="search-query span2" value="" placeholder="搜索">
          </form>
          <ul class="nav pull-right" id="userbar">
            {{if .me}}
            <li>
              <a href="/message/system" id="user_message_count"><span class="badge{{if .me.msgnum}} badge-warning{{end}}">{{.me.msgnum}}</span></a>
            </li>
            {{if .me.isadmin}}
            <li>
              <a href="/admin/" target="_blank">管理后台</a>
            </li>
            {{end}}
            <li class="dropdown" id="user_menu">
              <a href="#user_menu" class="dropdown-toggle" data-toggle="dropdown">{{.me.username}} <b class="caret"></b></a>
              <ul class="dropdown-menu">
                <li class="first"><a href="/user/{{.me.username}}">我的主页</a></li>
                <li><a href="/account/edit">个人资料设置</a></li>
                <li><a href="/{{.me.username}}/favorites">我的收藏</a></li>
                <li class="last"><a href="/account/logout">退出</a></li>
              </ul>
            </li>
            {{else}}
            <li class="first"><a href="/account/register">注册</a></li><li class="last"><a href="/account/login">登录</a></li>
            {{end}}
          </ul>
        </div>
      </div>
    </div>

    <div class="container">
      <div class="hidden-phone">
        <ul class="breadcrumb menu clearfix">
          {{template "topnav" .}}
        </ul>
      </div>
      <!--
      <div class="feed_link hidden-phone">
        <a href="/topics/feed" class="feed" title="订阅Study Golang社区新帖"><span class="icon icons_rss"></span> Feed</a>
      </div>
      -->
      {{template "content" .}}
    </div>
    <a class="go_top" href="#" style="display: none;"><i class="icon icons_go_top"></i></a>
    <footer class="footer">
      <div class="container">
        <div>
          <div class="pull-left" style="margin-right:10px;">
            <img src="/static/img/logo.png" style="width:48px;" alt="golang logo">
          </div>
          <p class="links">
            <a href="/wiki/about">关于</a> | <a href="/api">API</a> | <a href="/wiki/contributors">贡献者</a> | <a href="/wiki/">帮助推广</a> | <a href="/topics/node16">反馈</a> | <a href="http://github.com/studygolang" target="_blank" rel="nofollow">Github</a> | <a href="http://weibo.com/studygolang" target="_blank" rel="nofollow">新浪微博</a> | <a href="http://www.ucai.cn" target="_blank">优才网</a>
          </p>
          <p class="copyright">&copy;2014 studygolang.com 采用 <a href="http://golang.org" target="_blank">Go语言</a> + <a href="http://www.mysql.com/" target="_blank">MYSQL 构建</a>
          &nbsp;&nbsp;当前在线：<span id="onlineusers"></span>人&nbsp;&nbsp;历史最高：<span id="maxonline"></span>人
          <br/>中国 Golang 社区，Go语言学习园地，致力于构建完善的 Golang 中文社区，Go语言爱好者的学习家园。京ICP备14030343号-1
          </p>
        </div> 
      </div>
    </footer>
    <script src="http://libs.baidu.com/jquery/1.7.1/jquery.min.js"></script>
    <!--<script type="text/javascript" src="/static/js/jquery-1.9.1.min.js"></script>-->
    <!--<script type="text/javascript" src="/static/js/bootstrap.min.js"></script>-->
    <script src="http://libs.baidu.com/bootstrap/2.0.4/js/bootstrap.min.js"></script>
    <!--<script src="/static/js/bootstrap-transition.js"></script>
    <script src="/static/js/bootstrap-alert.js"></script>
    <script src="/static/js/bootstrap-modal.js"></script>
    <script src="/static/js/bootstrap-dropdown.js"></script>
    <script src="/static/assets/js/bootstrap-scrollspy.js"></script>
    <script src="/static/js/bootstrap-tab.js"></script>
    <script src="/static/js/bootstrap-tooltip.js"></script>
    <script src="/static/js/bootstrap-popover.js"></script>
    <script src="/static/js/bootstrap-button.js"></script>
    <script src="/static/js/bootstrap-collapse.js"></script>
    <script src="/static/js/bootstrap-carousel.js"></script>
    <script src="/static/js/bootstrap-typeahead.js"></script>-->
    <script type="text/javascript" src="/static/js/jquery.atwho.min.js"></script>
    <script type="text/javascript" src="/static/js/jquery.timeago.js"></script>
    <script type="text/javascript" src="/static/js/jquery.timeago.zh-CN.js"></script>
    <!--<script type="text/javascript" src="/static/js/jquery.html5-fileupload.js"></script>-->
    <script type="text/javascript" src="/static/js/sisyphus.min.js"></script>
    <!--<script type="text/javascript" src="/static/js/notification.js"></script>-->
    <script type="text/javascript" src="/static/js/app.js"></script>
    {{template "js" .}}
    <script type="text/javascript">
    window.WebSocket = window.WebSocket || window.MozWebSocket;
    if (window.WebSocket) {
        var wsUrl = 'ws://{{.wshost}}/ws?uid={{.me.uid}}';
        // var wsUrl = 'ws://studygolang.com/ws?uid={{.me.uid}}';
        var websocket = new WebSocket(wsUrl);

        websocket.onopen = function(){
            //alert("open");
        }

        websocket.onclose = function(){
            //alert("close");
        }

        websocket.onmessage = function(msgEvent){
            data = JSON.parse(msgEvent.data);
            switch (data.type) {
            case 0:
                var $badge = $('#user_message_count .badge'),
                    curVal = parseInt($badge.text(), 10);
                totalVal = parseInt(data.body) + curVal;
                if (totalVal > 0) {
                    $badge.addClass('badge-warning').text(totalVal);
                } else {
                    $badge.removeClass('badge-warning').text(0);
                }
                break;
            case 1:
                $('#onlineusers').text(data.body.online);
                if (data.body.maxonline) {
                    $('#maxonline').text(data.body.maxonline);
                }
                break;
            }
        }
        
        // websocket.onerror = onError;
    }
    </script>
    <!-- JiaThis Button BEGIN -->
    <script type="text/javascript">
    var jiathis_config = {data_track_clickback:'true'};
    </script>
    <script type="text/javascript" src="http://v3.jiathis.com/code_mini/jiathis_r.js?uid=1358871817652577" charset="utf-8"></script>
    <!-- JiaThis Button END -->
  </body>
</html>
