var emojis=["bowtie","smile","laughing","blush","smiley","relaxed","smirk","heart_eyes","kissing_heart","kissing_closed_eyes","flushed","relieved","satisfied","grin","wink","stuck_out_tongue_winking_eye","stuck_out_tongue_closed_eyes","grinning","kissing","kissing_smiling_eyes","stuck_out_tongue","sleeping","worried","frowning","anguished","open_mouth","grimacing","confused","hushed","expressionless","unamused","sweat_smile","sweat","disappointed_relieved","weary","pensive","disappointed","confounded","fearful","cold_sweat","persevere","cry","sob","joy","astonished","scream","neckbeard","tired_face","angry","rage","triumph","sleepy","yum","mask","sunglasses","dizzy_face","imp","smiling_imp","neutral_face","no_mouth","innocent","alien","yellow_heart","blue_heart","purple_heart","heart","green_heart","broken_heart","heartbeat","heartpulse","two_hearts","revolving_hearts","cupid","sparkling_heart","sparkles","star","star2","dizzy","boom","collision","anger","exclamation","question","grey_exclamation","grey_question","zzz","dash","sweat_drops","notes","musical_note","fire","hankey","poop","shit","+1","thumbsup","-1","thumbsdown","ok_hand","punch","facepunch","fist","v","wave","hand","raised_hand","open_hands","point_up","point_down","point_left","point_right","raised_hands","pray","point_up_2","clap","muscle","metal","fu","walking","runner","running","couple","family","two_men_holding_hands","two_women_holding_hands","dancer","dancers","ok_woman","no_good","information_desk_person","raising_hand","bride_with_veil","person_with_pouting_face","person_frowning","bow","couplekiss","couple_with_heart","massage","haircut","nail_care","boy","girl","woman","man","baby","older_woman","older_man","person_with_blond_hair","man_with_gua_pi_mao","man_with_turban","construction_worker","cop","angel","princess","smiley_cat","smile_cat","heart_eyes_cat","kissing_cat","smirk_cat","scream_cat","crying_cat_face","joy_cat","pouting_cat","japanese_ogre","japanese_goblin","see_no_evil","hear_no_evil","speak_no_evil","guardsman","skull","feet","lips","kiss","droplet","ear","eyes","nose","tongue","love_letter","bust_in_silhouette","busts_in_silhouette","speech_balloon","thought_balloon","feelsgood","finnadie","goberserk","godmode","hurtrealbad","rage1","rage2","rage3","rage4","suspect","trollface","sunny","umbrella","cloud","snowflake","snowman","zap","cyclone","foggy","ocean","cat","dog","mouse","hamster","rabbit","wolf","frog","tiger","koala","bear","pig","pig_nose","cow","boar","monkey_face","monkey","horse","racehorse","camel","sheep","elephant","panda_face","snake","bird","baby_chick","hatched_chick","hatching_chick","chicken","penguin","turtle","bug","honeybee","ant","beetle","snail","octopus","tropical_fish","fish","whale","whale2","dolphin","cow2","ram","rat","water_buffalo","tiger2","rabbit2","dragon","goat","rooster","dog2","pig2","mouse2","ox","dragon_face","blowfish","crocodile","dromedary_camel","leopard","cat2","poodle","paw_prints","bouquet","cherry_blossom","tulip","four_leaf_clover","rose","sunflower","hibiscus","maple_leaf","leaves","fallen_leaf","herb","mushroom","cactus","palm_tree","evergreen_tree","deciduous_tree","chestnut","seedling","blossom","ear_of_rice","shell","globe_with_meridians","sun_with_face","full_moon_with_face","new_moon_with_face","new_moon","waxing_crescent_moon","first_quarter_moon","waxing_gibbous_moon","full_moon","waning_gibbous_moon","last_quarter_moon","waning_crescent_moon","last_quarter_moon_with_face","first_quarter_moon_with_face","moon","earth_africa","earth_americas","earth_asia","volcano","milky_way","partly_sunny","octocat","squirrel","bamboo","gift_heart","dolls","school_satchel","mortar_board","flags","fireworks","sparkler","wind_chime","rice_scene","jack_o_lantern","ghost","santa","christmas_tree","gift","bell","no_bell","tanabata_tree","tada","confetti_ball","balloon","crystal_ball","cd","dvd","floppy_disk","camera","video_camera","movie_camera","computer","tv","iphone","phone","telephone","telephone_receiver","pager","fax","minidisc","vhs","sound","speaker","mute","loudspeaker","mega","hourglass","hourglass_flowing_sand","alarm_clock","watch","radio","satellite","loop","mag","mag_right","unlock","lock","lock_with_ink_pen","closed_lock_with_key","key","bulb","flashlight","high_brightness","low_brightness","electric_plug","battery","calling","email","mailbox","postbox","bath","bathtub","shower","toilet","wrench","nut_and_bolt","hammer","seat","moneybag","yen","dollar","pound","euro","credit_card","money_with_wings","e-mail","inbox_tray","outbox_tray","envelope","incoming_envelope","postal_horn","mailbox_closed","mailbox_with_mail","mailbox_with_no_mail","package","door","smoking","bomb","gun","hocho","pill","syringe","page_facing_up","page_with_curl","bookmark_tabs","bar_chart","chart_with_upwards_trend","chart_with_downwards_trend","scroll","clipboard","calendar","date","card_index","file_folder","open_file_folder","scissors","pushpin","paperclip","black_nib","pencil2","straight_ruler","triangular_ruler","closed_book","green_book","blue_book","orange_book","notebook","notebook_with_decorative_cover","ledger","books","bookmark","name_badge","microscope","telescope","newspaper","football","basketball","soccer","baseball","tennis","8ball","rugby_football","bowling","golf","mountain_bicyclist","bicyclist","horse_racing","snowboarder","swimmer","surfer","ski","spades","hearts","clubs","diamonds","gem","ring","trophy","musical_score","musical_keyboard","violin","space_invader","video_game","black_joker","flower_playing_cards","game_die","dart","mahjong","clapper","memo","pencil","book","art","microphone","headphones","trumpet","saxophone","guitar","shoe","sandal","high_heel","lipstick","boot","shirt","tshirt","necktie","womans_clothes","dress","running_shirt_with_sash","jeans","kimono","bikini","ribbon","tophat","crown","womans_hat","mans_shoe","closed_umbrella","briefcase","handbag","pouch","purse","eyeglasses","fishing_pole_and_fish","coffee","tea","sake","baby_bottle","beer","beers","cocktail","tropical_drink","wine_glass","fork_and_knife","pizza","hamburger","fries","poultry_leg","meat_on_bone","spaghetti","curry","fried_shrimp","bento","sushi","fish_cake","rice_ball","rice_cracker","rice","ramen","stew","oden","dango","egg","bread","doughnut","custard","icecream","ice_cream","shaved_ice","birthday","cake","cookie","chocolate_bar","candy","lollipop","honey_pot","apple","green_apple","tangerine","lemon","cherries","grapes","watermelon","strawberry","peach","melon","banana","pear","pineapple","sweet_potato","eggplant","tomato","corn"];emojis=$.map(emojis,function(e,t){return{key:":"+e+":",name:e}}),function(e){e.fn.Huploadify=function(t){var i={fileTypeExts:"*.*",uploader:"",auto:!1,method:"post",multi:!0,formData:null,fileObjName:"file",fileSizeLimit:2048,showUploadedPercent:!0,showUploadedSize:!1,buttonText:"选择文件",removeTimeout:1e3,itemTemplate:'<div id="${fileID}" class="uploadify-queue-item"><div class="uploadify-progress"><div class="uploadify-progress-bar"></div></div><span class="up_filename">${fileName}</span><span class="uploadbtn">上传</span><span class="delfilebtn">删除</span></div>',onUploadStart:null,onUploadSuccess:null,onUploadComplete:null,onUploadAllComplete:null,onUploadError:null,onInit:null,onCancel:null},n=e.extend(i,t),o=function(e,t){return e=e>1048576&&!t?(Math.round(100*e/1048576)/100).toString()+"MB":(Math.round(100*e/1024)/100).toString()+"KB"},a=function(e){for(var t=[],i=e.split(";"),n=0,o=i.length;n<o;n++)t.push(i[n].split(".").pop());return t};this.each(function(){var t=e(this),i=e(".uploadify").length+1,r='<input id="select_btn_'+i+'" class="selectbtn" style="display:none;" type="file" name="fileselect[]"';r+=n.multi?" multiple":"",r+=' accept="',r+=a(n.fileTypeExts).join(","),r+='"/>',r+='<a id="file_upload_'+i+'-button" href="javascript:void(0)" class="uploadify-button">',r+=n.buttonText,r+="</a>";var s='<div id="file_upload_'+i+'-queue" class="uploadify-queue"></div>';t.append(r+s);var l={fileInput:t.find(".selectbtn"),uploadFileList:t.find(".uploadify-queue"),url:n.uploader,fileFilter:[],filter:function(t){var i=[],r=a(n.fileTypeExts);if(r.length>0)for(var s=0,l=t.length;s<l;s++){var h=t[s];parseInt(o(h.size,!0))>n.fileSizeLimit?alert("文件"+h.name+"大小超出限制！"):e.inArray(h.name.split(".").pop(),r)>=0||e.inArray("*",r)>=0?i.push(h):alert("文件"+h.name+"类型不允许！")}return i},onSelect:function(a){for(var r=0,s=a.length;r<s;r++){var h=a[r],u=e(n.itemTemplate.replace(/\${fileID}/g,"fileupload_"+i+"_"+h.index).replace(/\${fileName}/g,h.name).replace(/\${fileSize}/g,o(h.size)).replace(/\${instanceID}/g,t.attr("id")));if(n.auto&&u.find(".uploadbtn").remove(),this.uploadFileList.append(u),n.showUploadedSize){var c='<span class="progressnum"><span class="uploadedsize">0KB</span>/<span class="totalsize">${fileSize}</span></span>'.replace(/\${fileSize}/g,o(h.size));u.find(".uploadify-progress").after(c)}if(n.showUploadedPercent){u.find(".uploadify-progress").after('<span class="up_percent">0%</span>')}var d=!1;r==s-1&&(d=!0),n.auto?this.funUploadFile(h,d):u.find(".uploadbtn").on("click",function(e){return function(){l.funUploadFile(e,d)}}(h)),u.find(".delfilebtn").on("click",function(e){return function(){l.funDeleteFile(e.index)}}(h))}},onProgress:function(e,a,r){var s=t.find("#fileupload_"+i+"_"+e.index+" .uploadify-progress"),l=(a/r*100).toFixed(2)+"%";n.showUploadedSize&&(s.nextAll(".progressnum .uploadedsize").text(o(a)),s.nextAll(".progressnum .totalsize").text(o(r))),n.showUploadedPercent&&s.nextAll(".up_percent").text(l),s.children(".uploadify-progress-bar").css("width",l)},funGetFiles:function(e){for(var t=e.target.files,i=0,n=(t=this.filter(t)).length;i<n;i++)this.fileFilter.push(t[i]);return this.funDealFiles(t),this},funDealFiles:function(e){for(var i=t.find(".uploadify-queue .uploadify-queue-item").length,n=0,o=e.length;n<o;n++)e[n].index=++i,e[n].id=e[n].index;return this.onSelect(e),this},funDeleteFile:function(e){for(var o=0,a=this.fileFilter.length;o<a;o++){var r=this.fileFilter[o];if(r.index==e){this.fileFilter.splice(o,1),t.find("#fileupload_"+i+"_"+e).fadeOut(),n.onCancel&&n.onCancel(r);break}}return this},funUploadFile:function(e,o){var a=!1;try{a=new XMLHttpRequest}catch(e){a=ActiveXobject("Msxml12.XMLHTTP")}if(a.upload){a.upload.addEventListener("progress",function(t){l.onProgress(e,t.loaded,t.total)},!1),a.onreadystatechange=function(r){if(4==a.readyState){if(200==a.status){var s=t.find("#fileupload_"+i+"_"+e.index);s.find(".uploadify-progress-bar").css("width","100%"),n.showUploadedSize&&s.find(".uploadedsize").text(s.find(".totalsize").text()),n.showUploadedPercent&&s.find(".up_percent").text("100%"),n.onUploadSuccess&&n.onUploadSuccess(e,a.responseText),setTimeout(function(){t.find("#fileupload_"+i+"_"+e.index).fadeOut()},n.removeTimeout)}else n.onUploadError&&n.onUploadError(e,a.responseText);n.onUploadComplete&&n.onUploadComplete(e,a.responseText),l.fileInput.val(""),o&&n.onUploadAllComplete&&n.onUploadAllComplete(e,a.responseText)}},n.onUploadStart&&n.onUploadStart(),a.open(n.method,this.url,!0),a.setRequestHeader("X-Requested-With","XMLHttpRequest");var r=new FormData;if(r.append(n.fileObjName,e),n.formData)for(key in n.formData)r.append(key,n.formData[key]);a.send(r)}},init:function(){this.fileInput.length>0&&this.fileInput.change(function(e){l.funGetFiles(e)}),t.find(".uploadify-button").on("click",function(){t.find(".selectbtn").trigger("click")}),n.onInit&&n.onInit()}};l.init()})}}(jQuery),function(){e=function(e){var t,i,n,o,a,r,s,l=[].slice;i=function(){function t(t){this.current_flag=null,this.controllers={},this.alias_maps={},this.$inputor=e(t),this.setIframe(),this.listen()}return t.prototype.createContainer=function(t){return 0===(this.$el=e("#atwho-container",t)).length?e(t.body).append(this.$el=e("<div id='atwho-container'></div>")):void 0},t.prototype.setIframe=function(e,t){var i;return null==t&&(t=!1),e?(this.window=e.contentWindow,this.document=e.contentDocument||this.window.document,this.iframe=e):(this.document=document,this.window=window,this.iframe=null),(this.iframeStandalone=t)?(null!=(i=this.$el)&&i.remove(),this.createContainer(this.document)):this.createContainer(document)},t.prototype.controller=function(e){var t,i,n,o;if(this.alias_maps[e])i=this.controllers[this.alias_maps[e]];else{o=this.controllers;for(n in o)if(t=o[n],n===e){i=t;break}}return i||this.controllers[this.current_flag]},t.prototype.set_context_for=function(e){return this.current_flag=e,this},t.prototype.reg=function(e,t){var i,o;return i=(o=this.controllers)[e]||(o[e]=new n(this,e)),t.alias&&(this.alias_maps[t.alias]=e),i.init(t),this},t.prototype.listen=function(){return this.$inputor.on("keyup.atwhoInner",(o=this,function(e){return o.on_keyup(e)})).on("keydown.atwhoInner",(n=this,function(e){return n.on_keydown(e)})).on("scroll.atwhoInner",(i=this,function(e){var t;return null!=(t=i.controller())?t.view.hide(e):void 0})).on("blur.atwhoInner",(t=this,function(e){var i;return(i=t.controller())?i.view.hide(e,i.get_opt("display_timeout")):void 0})).on("click.atwhoInner",(e=this,function(t){var i;return null!=(i=e.controller())?i.view.hide(t):void 0}));var e,t,i,n,o},t.prototype.shutdown=function(){var e,t,i;i=this.controllers;for(t in i)e=i[t],e.destroy(),delete this.controllers[t];return this.$inputor.off(".atwhoInner"),this.$el.remove()},t.prototype.dispatch=function(){return e.map(this.controllers,(t=this,function(e){var i;return(i=e.get_opt("delay"))?(clearTimeout(t.delayedCallback),t.delayedCallback=setTimeout(function(){return e.look_up()?t.set_context_for(e.at):void 0},i)):e.look_up()?t.set_context_for(e.at):void 0}));var t},t.prototype.on_keyup=function(t){var i;switch(t.keyCode){case a.ESC:t.preventDefault(),null!=(i=this.controller())&&i.view.hide();break;case a.DOWN:case a.UP:case a.CTRL:e.noop();break;case a.P:case a.N:t.ctrlKey||this.dispatch();break;default:this.dispatch()}},t.prototype.on_keydown=function(t){var i,n;if((i=null!=(n=this.controller())?n.view:void 0)&&i.visible())switch(t.keyCode){case a.ESC:t.preventDefault(),i.hide(t);break;case a.UP:t.preventDefault(),i.prev();break;case a.DOWN:t.preventDefault(),i.next();break;case a.P:if(!t.ctrlKey)return;t.preventDefault(),i.prev();break;case a.N:if(!t.ctrlKey)return;t.preventDefault(),i.next();break;case a.TAB:case a.ENTER:if(!i.visible())return;t.preventDefault(),i.choose(t);break;default:e.noop()}},t}(),n=function(){function t(t,i){this.app=t,this.at=i,this.$inputor=this.app.$inputor,this.id=this.$inputor[0].id||this.uid(),this.setting=null,this.query=null,this.pos=0,this.cur_rect=null,this.range=null,0===(this.$el=e("#atwho-ground-"+this.id,this.app.$el)).length&&this.app.$el.append(this.$el=e("<div id='atwho-ground-"+this.id+"'></div>")),this.model=new r(this),this.view=new s(this)}return t.prototype.uid=function(){return(Math.random().toString(16)+"000000000").substr(2,8)+(new Date).getTime()},t.prototype.init=function(t){return this.setting=e.extend({},this.setting||e.fn.atwho.default,t),this.view.init(),this.model.reload(this.setting.data)},t.prototype.destroy=function(){return this.trigger("beforeDestroy"),this.model.destroy(),this.view.destroy(),this.$el.remove()},t.prototype.call_default=function(){var t,i,n;n=arguments[0],t=2<=arguments.length?l.call(arguments,1):[];try{return o[n].apply(this,t)}catch(t){return i=t,e.error(i+" Or maybe At.js doesn't have function "+n)}},t.prototype.trigger=function(e,t){var i,n;return null==t&&(t=[]),t.push(this),n=(i=this.get_opt("alias"))?e+"-"+i+".atwho":e+".atwho",this.$inputor.trigger(n,t)},t.prototype.callbacks=function(e){return this.get_opt("callbacks")[e]||o[e]},t.prototype.get_opt=function(e){try{return this.setting[e]}catch(e){return e,null}},t.prototype.content=function(){return this.$inputor.is("textarea, input")?this.$inputor.val():this.$inputor.text()},t.prototype.catch_query=function(){var e,t,i,n,o,a;return t=this.content(),e=this.$inputor.caret("pos",{iframe:this.app.iframe}),a=t.slice(0,e),"string"==typeof(n=this.callbacks("matcher").call(this,this.at,a,this.get_opt("start_with_space")))&&n.length<=this.get_opt("max_len",20)?(i=(o=e-n.length)+n.length,this.pos=o,n={text:n,head_pos:o,end_pos:i},this.trigger("matched",[this.at,n.text])):(n=null,this.view.hide()),this.query=n},t.prototype.rect=function(){var t,i,n;if(t=this.$inputor.caret("offset",this.pos-1,{iframe:this.app.iframe}))return this.app.iframe&&!this.app.iframeStandalone&&(i=e(this.app.iframe).offset(),t.left+=i.left,t.top+=i.top),this.$inputor.is("[contentEditable]")&&(t=this.cur_rect||(this.cur_rect=t)),n=this.app.document.selection?0:2,{left:t.left,top:t.top,bottom:t.top+t.height+n}},t.prototype.reset_rect=function(){return this.$inputor.is("[contentEditable]")?this.cur_rect=null:void 0},t.prototype.mark_range=function(){var e;if(this.$inputor.is("[contentEditable]"))return this.app.window.getSelection&&(e=this.app.window.getSelection()).rangeCount>0?this.range=e.getRangeAt(0):this.app.document.selection?this.ie8_range=this.app.document.selection.createRange():void 0},t.prototype.insert_content_for=function(t){var i,n,o;return n=t.data("value"),o=this.get_opt("insert_tpl"),this.$inputor.is("textarea, input")||!o?n:(i=e.extend({},t.data("item-data"),{"atwho-data-value":n,"atwho-at":this.at}),this.callbacks("tpl_eval").call(this,o,i))},t.prototype.insert=function(t){var i,n,o,a,r,s,l,h,u;return i=this.$inputor,u=this.callbacks("inserting_wrapper").call(this,i,t,this.get_opt("suffix")),i.is("textarea, input")?(h=""+(l=(s=i.val()).slice(0,Math.max(this.query.head_pos-this.at.length,0)))+u+s.slice(this.query.end_pos||0),i.val(h),i.caret("pos",l.length+u.length,{iframe:this.app.iframe})):(a=this.range)?(o=a.startOffset-(this.query.end_pos-this.query.head_pos)-this.at.length,a.setStart(a.endContainer,Math.max(o,0)),a.setEnd(a.endContainer,a.endOffset),a.deleteContents(),n=e(u,this.app.document)[0],a.insertNode(n),a.setEndAfter(n),a.collapse(!1),(r=this.app.window.getSelection()).removeAllRanges(),r.addRange(a)):(a=this.ie8_range)&&(a.moveStart("character",this.query.end_pos-this.query.head_pos-this.at.length),a.pasteHTML(u),a.collapse(!1),a.select()),i.is(":focus")||i.focus(),i.change()},t.prototype.render_view=function(e){var t;return t=this.get_opt("search_key"),e=this.callbacks("sorter").call(this,this.query.text,e.slice(0,1001),t),this.view.render(e.slice(0,this.get_opt("limit")))},t.prototype.look_up=function(){var t,i;if(t=this.catch_query())return i=function(e){return e&&e.length>0?this.render_view(e):this.view.hide()},this.model.query(t.text,e.proxy(i,this)),t},t}(),r=function(){function t(e){this.context=e,this.at=this.context.at,this.storage=this.context.$inputor}return t.prototype.destroy=function(){return this.storage.data(this.at,null)},t.prototype.saved=function(){return this.fetch()>0},t.prototype.query=function(e,t){var i,n,o;return i=this.fetch(),n=this.context.get_opt("search_key"),i=this.context.callbacks("filter").call(this.context,e,i,n)||[],o=this.context.callbacks("remote_filter"),i.length>0||!o&&0===i.length?t(i):o.call(this.context,e,t)},t.prototype.fetch=function(){return this.storage.data(this.at)||[]},t.prototype.save=function(e){return this.storage.data(this.at,this.context.callbacks("before_save").call(this.context,e||[]))},t.prototype.load=function(e){return!this.saved()&&e?this._load(e):void 0},t.prototype.reload=function(e){return this._load(e)},t.prototype._load=function(t){return"string"==typeof t?e.ajax(t,{dataType:"json"}).done((i=this,function(e){return i.save(e)})):this.save(t);var i},t}(),s=function(){function t(t){this.context=t,this.$el=e("<div class='atwho-view'><ul class='atwho-view-ul'></ul></div>"),this.timeout_id=null,this.context.$el.append(this.$el),this.bind_event()}return t.prototype.init=function(){var e;return e=this.context.get_opt("alias")||this.context.at.charCodeAt(0),this.$el.attr({id:"at-view-"+e})},t.prototype.destroy=function(){return this.$el.remove()},t.prototype.bind_event=function(){var t;return(t=this.$el.find("ul")).on("mouseenter.atwho-view","li",function(i){return t.find(".cur").removeClass("cur"),e(i.currentTarget).addClass("cur")}).on("click",(i=this,function(e){return i.choose(e),e.preventDefault()}));var i},t.prototype.visible=function(){return this.$el.is(":visible")},t.prototype.choose=function(e){var t,i;return(t=this.$el.find(".cur")).length&&(i=this.context.insert_content_for(t),this.context.insert(this.context.callbacks("before_insert").call(this.context,i,t),t),this.context.trigger("inserted",[t,e]),this.hide(e)),this.context.get_opt("hide_without_suffix")?this.stop_showing=!0:void 0},t.prototype.reposition=function(t){var i,n,o,a;return a=this.context.app.iframeStandalone?this.context.app.window:window,t.bottom+this.$el.height()-e(a).scrollTop()>e(a).height()&&(t.bottom=t.top-this.$el.height()),t.left>(n=e(a).width()-this.$el.width()-5)&&(t.left=n),i={left:t.left,top:t.bottom},null!=(o=this.context.callbacks("before_reposition"))&&o.call(this.context,i),this.$el.offset(i),this.context.trigger("reposition",[i])},t.prototype.next=function(){var e;return(e=this.$el.find(".cur").removeClass("cur").next()).length||(e=this.$el.find("li:first")),e.addClass("cur")},t.prototype.prev=function(){var e;return(e=this.$el.find(".cur").removeClass("cur").prev()).length||(e=this.$el.find("li:last")),e.addClass("cur")},t.prototype.show=function(){var e;return this.stop_showing?void(this.stop_showing=!1):(this.context.mark_range(),this.visible()||(this.$el.show(),this.context.trigger("shown")),(e=this.context.rect())?this.reposition(e):void 0)},t.prototype.hide=function(e,t){var i;if(this.visible())return isNaN(t)?(this.context.reset_rect(),this.$el.hide(),this.context.trigger("hidden",[e])):(n=this,i=function(){return n.hide()},clearTimeout(this.timeout_id),this.timeout_id=setTimeout(i,t));var n},t.prototype.render=function(t){var i,n,o,a,r,s,l;{if(e.isArray(t)&&t.length>0){for(this.$el.find("ul").empty(),n=this.$el.find("ul"),r=this.context.get_opt("tpl"),s=0,l=t.length;l>s;s++)o=t[s],o=e.extend({},o,{"atwho-at":this.context.at}),a=this.context.callbacks("tpl_eval").call(this.context,r,o),i=e(this.context.callbacks("highlighter").call(this.context,a,this.context.query.text)),i.data("item-data",o),n.append(i);return this.show(),this.context.get_opt("highlight_first")?n.find("li:first").addClass("cur"):void 0}this.hide()}},t}(),a={DOWN:40,UP:38,ESC:27,TAB:9,ENTER:13,CTRL:17,P:80,N:78},o={before_save:function(t){var i,n,o,a;if(!e.isArray(t))return t;for(a=[],n=0,o=t.length;o>n;n++)i=t[n],a.push(e.isPlainObject(i)?i:{name:i});return a},matcher:function(e,t,i){var n,o,a;return e=e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),i&&(e="(?:^|\\s)"+e),o=decodeURI("%C3%80"),a=decodeURI("%C3%BF"),(n=new RegExp(e+"([A-Za-z"+o+"-"+a+"0-9_+-]*)$|"+e+"([^\\x00-\\xff]*)$","gi").exec(t))?n[2]||n[1]:null},filter:function(e,t,i){var n,o,a,r;for(r=[],o=0,a=t.length;a>o;o++)n=t[o],~new String(n[i]).toLowerCase().indexOf(e.toLowerCase())&&r.push(n);return r},remote_filter:null,sorter:function(e,t,i){var n,o,a,r;if(!e)return t;for(r=[],o=0,a=t.length;a>o;o++)n=t[o],n.atwho_order=new String(n[i]).toLowerCase().indexOf(e.toLowerCase()),n.atwho_order>-1&&r.push(n);return r.sort(function(e,t){return e.atwho_order-t.atwho_order})},tpl_eval:function(e,t){try{return e.replace(/\$\{([^\}]*)\}/g,function(e,i){return t[i]})}catch(e){return e,""}},highlighter:function(e,t){var i;return t?(i=new RegExp(">\\s*(\\w*?)("+t.replace("+","\\+")+")(\\w*)\\s*<","ig"),e.replace(i,function(e,t,i,n){return"> "+t+"<strong>"+i+"</strong>"+n+" <"})):e},before_insert:function(e){return e},inserting_wrapper:function(e,t,i){var n,o;return n=""===i?i:i||" ",e.is("textarea, input")?""+t+n:"true"===e.attr("contentEditable")?(n=""===i?i:i||"&nbsp;",/firefox/i.test(navigator.userAgent)?o="<span>"+t+n+"</span>":o="<span contenteditable='false'>"+t+(i="<span contenteditable='false'>"+n+"<span>")+"</span>",this.app.document.selection&&(o="<span contenteditable='true'>"+t+"</span>"),o):void 0}},t={load:function(e,t){var i;return(i=this.controller(e))?i.model.load(t):void 0},setIframe:function(e,t){return this.setIframe(e,t),null},run:function(){return this.dispatch()},destroy:function(){return this.shutdown(),this.$inputor.data("atwho",null)}},e.fn.atwho=function(n){var o,a;return a=arguments,o=null,this.filter('textarea, input, [contenteditable=""], [contenteditable=true]').each(function(){var r,s;return(s=(r=e(this)).data("atwho"))||r.data("atwho",s=new i(this)),"object"!=typeof n&&n?t[n]&&s?o=t[n].apply(s,Array.prototype.slice.call(a,1)):e.error("Method "+n+" does not exist on jQuery.caret"):s.reg(n.at,n)}),o||this},e.fn.atwho.default={at:void 0,alias:void 0,data:null,tpl:"<li data-value='${atwho-at}${name}'>${name}</li>",insert_tpl:"<span id='${id}'>${atwho-data-value}</span>",callbacks:o,search_key:"name",suffix:void 0,hide_without_suffix:!1,start_with_space:!0,highlight_first:!0,limit:5,max_len:20,display_timeout:300,delay:null}},"function"==typeof define&&define.amd?define(["jquery"],e):e(window.jQuery);var e}.call(this),jQuery.fn.autoGrow=function(){return this.each(function(){var e,t=function(e){i.innerHTML=String(e.value).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\n/g,"<br />")+".<br/>.",jQuery(e).height()!=jQuery(i).height()&&jQuery(e).height(jQuery(i).height())},i=(e=this,jQuery(e).after('<div class="autogrow-textarea-mirror"></div>'),jQuery(e).next(".autogrow-textarea-mirror")[0]);i.style.display="none",i.style.wordWrap="break-word",i.style.padding=jQuery(this).css("padding"),i.style.width=jQuery(this).css("width"),i.style.fontFamily=jQuery(this).css("font-family"),i.style.fontSize=jQuery(this).css("font-size"),i.style.lineHeight=jQuery(this).css("line-height"),this.style.overflow="hidden",this.style.minHeight=this.rows+"em",this.onkeyup=function(){t(this)},t(this)})},function(e){e.fn.cftoaster=function(t){var i=e.extend({},e.fn.cftoaster.options,t);return this.each(function(){i.element=e(this),!function(t){for(var i="",n=0;n<=e.cftoaster.DESTROY_COMMAND.length&&t.hasOwnProperty(n);n++)i+=t[n];return i==e.cftoaster.DESTROY_COMMAND}(i)?e.cftoaster._addToQueue(i):e.cftoaster._destroy(i)})},e.fn.cftoaster.options={content:"This is a toast message eh",element:"body",animationTime:150,showTime:3e3,maxWidth:250,backgroundColor:"#1a1a1a",fontColor:"#eaeaea",bottomMargin:75}}(jQuery),jQuery.extend({cftoaster:{NAMESPACE:"cf_toaster",DESTROY_COMMAND:"destroy",MAIN_CSS_CLASS:"cf_toaster",_queue:[],_addToQueue:function(e){this._queue.push(e),e.element&&!this._isShowingToastMessage(e.element)&&this._showNextInQueue(e.element)},_removeFromQueue:function(e){if(e)for(var t in this._queue){var i=this._queue[t];$(i.element).is(e)&&this._queue.splice(t,1)}else this._queue=[]},_destroy:function(e){var t=e&&e.element?e.element:void 0;t?$(t).find("."+this.MAIN_CSS_CLASS).remove():$("."+this.MAIN_CSS_CLASS).remove(),this._removeFromQueue(t)},_isShowingToastMessage:function(e){var t=!1;return e&&(t=$(e).find("."+this.MAIN_CSS_CLASS).size()>0),t},_showNextInQueue:function(e){for(var t,i=0;i<this._queue.length;i++){var n=this._queue[i];if($(n.element).is(e)){t=n,this._queue.splice(i,1);break}}if(t){var o=$("<div/>").addClass("background").css("background",t.backgroundColor),a=$("<div/>").addClass("content").html(t.content).css("width",t.maxWidth+"px").css("color",t.fontColor),r=$("<div/>").addClass(this.MAIN_CSS_CLASS).hide().append(o).append(a);$(e).append(r);var s=-$(r).outerWidth()/2+"px";$(r).css("bottom",t.bottomMargin+"px").css("margin-left",s),$(r).stop().fadeIn(t.animationTime).delay(t.showTime).fadeOut(t.animationTime,function(){$(this).remove(),$.cftoaster._showNextInQueue(e)})}},setDefaults:function(e){var t=$.extend({},$.fn.cftoaster.options,e);$.fn.cftoaster.options=t}}}),jQuery(document).ready(function(e){var t=0;e(".github-widget").each(function(){0==t&&e("head").append('<style type="text/css">.github-box *{-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;}.github-box{font-family:helvetica,arial,sans-serif;font-size:13px;line-height:18px;background:#fafafa;border:1px solid #ddd;color:#666;border-radius:3px}.github-box a{color:#4183c4;border:0;text-decoration:none}.github-box .github-box-title{position:relative;border-bottom:1px solid #ddd;border-radius:3px 3px 0 0;background:#fcfcfc;background:-moz-linear-gradient(#fcfcfc,#ebebeb);background:-webkit-linear-gradient(#fcfcfc,#ebebeb);}.github-box .github-box-title h3{word-wrap:break-word;font-family:helvetica,arial,sans-serif;font-weight:normal;font-size:16px;color:gray;margin:0;padding:10px 10px 10px 80px;background:url(http://studygolang.qiniudn.com/github_logo.gif) 7px center no-repeat; width: auto;}.github-box .github-box-title h3 .repo{font-weight:bold}.github-box .github-box-title .github-stats{float:right;position:absolute;top:8px;right:10px;font-size:11px;font-weight:bold;line-height:21px;height:auto;min-height:21px}.github-box .github-box-title .github-stats a{display:inline-block;height:21px;color:#666;border:1px solid #ddd;border-radius:3px;padding:0 5px 0 18px;background: white url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAqCAMAAACEJ4viAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYxIDY0LjE0MDk0OSwgMjAxMC8xMi8wNy0xMDo1NzowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNS4xIE1hY2ludG9zaCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpEQjIyNkJEQkM0NjYxMUUxOEFDQzk3ODcxRDkzRjhCRSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpEQjIyNkJEQ0M0NjYxMUUxOEFDQzk3ODcxRDkzRjhCRSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkRCMjI2QkQ5QzQ2NjExRTE4QUNDOTc4NzFEOTNGOEJFIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkRCMjI2QkRBQzQ2NjExRTE4QUNDOTc4NzFEOTNGOEJFIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+h1kA9gAAAK5QTFRF+fn5sbGx8fHx09PTmpqa2dnZ/f3919fX9PT00NDQ1dXVpKSk+vr6+/v7vb298vLyycnJ8/PztLS0zc3N6enp/v7+q6ur2NjY9/f3srKy/Pz8p6en7u7uoaGhnJyc4eHhtbW1pqam6Ojo9fX17e3toqKirKys1NTUzs7Ox8fHwcHBwMDA5eXlnZ2dpaWl0dHR9vb25ubm4uLi3d3dqqqqwsLCv7+/oKCgmZmZ////8yEsbwAAAMBJREFUeNrE0tcOgjAUBuDSliUoMhTEvfdef9//xUQjgaLX0Ium/ZLT/+SkRPxZpGykvuf5VMJogy5jY9yjDHcWFhqlcRuHc4o6B1QK0BDg+hcZgNDh3NWTwzItH/bRrhvT+g3zSxZkNGCZpoWGIbU0a3Y6zV5VA6keyeDxiw62P0gUqEW0FbDim4nVikFJbU2zZXybUEaxhCqOQqyh5/G0wpWICUwthyqwD4InOMuXJ7/gs7WkoPdVg1vykF8CDACEFanKO3aSYwAAAABJRU5ErkJggg==) no-repeat}.github-box .github-box-title .github-stats .watchers{border-right:1px solid #ddd}.github-box .github-box-title .github-stats .forks{background-position:-4px -21px;padding-left:15px}.github-box .github-box-content{padding:10px;font-weight:300}.github-box .github-box-content p{margin:0}.github-box .github-box-content .link{font-weight:bold}.github-box .github-box-download{position:relative;border-top:1px solid #ddd;background:white;border-radius:0 0 3px 3px;padding:10px;height:auto;min-height:24px;}.github-box .github-box-download .updated{word-wrap:break-word;margin:0;font-size:11px;color:#666;line-height:24px;font-weight:300;width:auto}.github-box .github-box-download .updated strong{font-weight:bold;color:#000}.github-box .github-box-download .download{float:right;position:absolute;top:10px;right:10px;height:24px;line-height:24px;font-size:12px;color:#666;font-weight:bold;text-shadow:0 1px 0 rgba(255,255,255,0.9);padding:0 10px;border:1px solid #ddd;border-bottom-color:#bbb;border-radius:3px;background:#f5f5f5;background:-moz-linear-gradient(#f5f5f5,#e5e5e5);background:-webkit-linear-gradient(#f5f5f5,#e5e5e5);}.github-box .github-box-download .download:hover{color:#527894;border-color:#cfe3ed;border-bottom-color:#9fc7db;background:#f1f7fa;background:-moz-linear-gradient(#f1f7fa,#dbeaf1);background:-webkit-linear-gradient(#f1f7fa,#dbeaf1);}@media (max-width: 767px) {.github-box .github-box-title{height:auto;min-height:60px}.github-box .github-box-title h3 .repo{display:block}.github-box .github-box-title .github-stats a{display:block;clear:right;float:right;}.github-box .github-box-download{height:auto;min-height:46px;}.github-box .github-box-download .download{top:32px;}}</style>'),t++;var i,n=e(this),o=n.data("repo"),a=o.split("/")[0],r=o.split("/")[1],s="http://github.com/"+a,l="http://github.com/"+a+"/"+r;(i=e('<div class="github-box repo"><div class="github-box-title"><h3><a class="owner" href="'+s+'" title="'+s+'">'+a+'</a>/<a class="repo" href="'+l+'" title="'+l+'">'+r+'</a></h3><div class="github-stats"><a class="watchers" href="'+l+'/watchers" title="See watchers">?</a><a class="forks" href="'+l+'/network/members" title="See forkers">?</a></div></div><div class="github-box-content"><p class="description"><span></span> — <a href="'+l+'#readme">Read More</a></p><p class="link"></p></div><div class="github-box-download"><div class="updated"></div><a class="download" href="'+l+'/zipball/master" title="Get an archive of this repository">Download as zip</a></div></div>')).appendTo(n),e.ajax({url:"https://api.github.com/repos/"+o,dataType:"jsonp",success:function(t){var n,o=t.data,a="unknown";o.pushed_at&&(a=(n=new Date(o.pushed_at)).getMonth()+1+"-"+n.getDate()+"-"+n.getFullYear()),i.find(".watchers").text(o.watchers),i.find(".forks").text(o.forks),i.find(".description span").text(o.description),i.find(".updated").html("Latest commit to the <strong>"+o.default_branch+"</strong> branch on "+a),null!=o.homepage&&i.find(".link").append(e("<a />").attr("href",o.homepage).text(o.homepage))}})})}),function($){$.extend({metadata:{defaults:{type:"class",name:"metadata",cre:/({.*})/,single:"metadata"},setType:function(e,t){this.defaults.type=e,this.defaults.name=t},get:function(elem,opts){var settings=$.extend({},this.defaults,opts);settings.single.length||(settings.single="metadata");var data=$.data(elem,settings.single);if(data)return data;if(data="{}","class"==settings.type){var m=settings.cre.exec(elem.className);m&&(data=m[1])}else if("elem"==settings.type){if(!elem.getElementsByTagName)return;var e=elem.getElementsByTagName(settings.name);e.length&&(data=$.trim(e[0].innerHTML))}else if(void 0!=elem.getAttribute){var attr=elem.getAttribute(settings.name);attr&&(data=attr)}return data.indexOf("{")<0&&(data="{"+data+"}"),data=eval("("+data+")"),$.data(elem,settings.single,data),data}}}),$.fn.metadata=function(e){return $.metadata.get(this[0],e)}}(jQuery),jQuery.timeago.settings.strings={prefixAgo:null,prefixFromNow:"从现在开始",suffixAgo:"之前",suffixFromNow:null,seconds:"不到1分钟",minute:"大约1分钟",minutes:"%d分钟",hour:"大约1小时",hours:"大约%d小时",day:"1天",days:"%d天",month:"大约1个月",months:"%d月",year:"大约1年",years:"%d年",numbers:[],wordSeparator:""};function md5cycle(e,t){var i=e[0],n=e[1],o=e[2],a=e[3];n=ii(n=ii(n=ii(n=ii(n=hh(n=hh(n=hh(n=hh(n=gg(n=gg(n=gg(n=gg(n=ff(n=ff(n=ff(n=ff(n,o=ff(o,a=ff(a,i=ff(i,n,o,a,t[0],7,-680876936),n,o,t[1],12,-389564586),i,n,t[2],17,606105819),a,i,t[3],22,-1044525330),o=ff(o,a=ff(a,i=ff(i,n,o,a,t[4],7,-176418897),n,o,t[5],12,1200080426),i,n,t[6],17,-1473231341),a,i,t[7],22,-45705983),o=ff(o,a=ff(a,i=ff(i,n,o,a,t[8],7,1770035416),n,o,t[9],12,-1958414417),i,n,t[10],17,-42063),a,i,t[11],22,-1990404162),o=ff(o,a=ff(a,i=ff(i,n,o,a,t[12],7,1804603682),n,o,t[13],12,-40341101),i,n,t[14],17,-1502002290),a,i,t[15],22,1236535329),o=gg(o,a=gg(a,i=gg(i,n,o,a,t[1],5,-165796510),n,o,t[6],9,-1069501632),i,n,t[11],14,643717713),a,i,t[0],20,-373897302),o=gg(o,a=gg(a,i=gg(i,n,o,a,t[5],5,-701558691),n,o,t[10],9,38016083),i,n,t[15],14,-660478335),a,i,t[4],20,-405537848),o=gg(o,a=gg(a,i=gg(i,n,o,a,t[9],5,568446438),n,o,t[14],9,-1019803690),i,n,t[3],14,-187363961),a,i,t[8],20,1163531501),o=gg(o,a=gg(a,i=gg(i,n,o,a,t[13],5,-1444681467),n,o,t[2],9,-51403784),i,n,t[7],14,1735328473),a,i,t[12],20,-1926607734),o=hh(o,a=hh(a,i=hh(i,n,o,a,t[5],4,-378558),n,o,t[8],11,-2022574463),i,n,t[11],16,1839030562),a,i,t[14],23,-35309556),o=hh(o,a=hh(a,i=hh(i,n,o,a,t[1],4,-1530992060),n,o,t[4],11,1272893353),i,n,t[7],16,-155497632),a,i,t[10],23,-1094730640),o=hh(o,a=hh(a,i=hh(i,n,o,a,t[13],4,681279174),n,o,t[0],11,-358537222),i,n,t[3],16,-722521979),a,i,t[6],23,76029189),o=hh(o,a=hh(a,i=hh(i,n,o,a,t[9],4,-640364487),n,o,t[12],11,-421815835),i,n,t[15],16,530742520),a,i,t[2],23,-995338651),o=ii(o,a=ii(a,i=ii(i,n,o,a,t[0],6,-198630844),n,o,t[7],10,1126891415),i,n,t[14],15,-1416354905),a,i,t[5],21,-57434055),o=ii(o,a=ii(a,i=ii(i,n,o,a,t[12],6,1700485571),n,o,t[3],10,-1894986606),i,n,t[10],15,-1051523),a,i,t[1],21,-2054922799),o=ii(o,a=ii(a,i=ii(i,n,o,a,t[8],6,1873313359),n,o,t[15],10,-30611744),i,n,t[6],15,-1560198380),a,i,t[13],21,1309151649),o=ii(o,a=ii(a,i=ii(i,n,o,a,t[4],6,-145523070),n,o,t[11],10,-1120210379),i,n,t[2],15,718787259),a,i,t[9],21,-343485551),e[0]=add32(i,e[0]),e[1]=add32(n,e[1]),e[2]=add32(o,e[2]),e[3]=add32(a,e[3])}function cmn(e,t,i,n,o,a){return t=add32(add32(t,e),add32(n,a)),add32(t<<o|t>>>32-o,i)}function ff(e,t,i,n,o,a,r){return cmn(t&i|~t&n,e,t,o,a,r)}function gg(e,t,i,n,o,a,r){return cmn(t&n|i&~n,e,t,o,a,r)}function hh(e,t,i,n,o,a,r){return cmn(t^i^n,e,t,o,a,r)}function ii(e,t,i,n,o,a,r){return cmn(i^(t|~n),e,t,o,a,r)}function md51(e){txt="";var t,i=e.length,n=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)md5cycle(n,md5blk(e.substring(t-64,t)));e=e.substring(t-64);var o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)o[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(o[t>>2]|=128<<(t%4<<3),t>55)for(md5cycle(n,o),t=0;t<16;t++)o[t]=0;return o[14]=8*i,md5cycle(n,o),n}function md5blk(e){var t,i=[];for(t=0;t<64;t+=4)i[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return i}var hex_chr="0123456789abcdef".split("");function rhex(e){for(var t="",i=0;i<4;i++)t+=hex_chr[e>>8*i+4&15]+hex_chr[e>>8*i&15];return t}function hex(e){for(var t=0;t<e.length;t++)e[t]=rhex(e[t]);return e.join("")}function md5(e){return hex(md51(e))}function add32(e,t){return e+t&4294967295}if("5d41402abc4b2a76b9719d911017c592"!=md5("hello"))function add32(e,t){var i=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(i>>16)<<16|65535&i}!function(e){var t,i="";e.fn.pasteUploadImage=function(n){t=e(this),i=n,t.on("paste",function(e){var t,i,n;if((n=e.originalEvent).clipboardData&&n.clipboardData.items&&(i=isImage(n)))return e.preventDefault(),t=getFilename(n)||"image.png",pasteText("{{"+t+"(uploading...)}}"),uploadFile(i.getAsFile(),t)}),t.on("drop",function(e){var t,i,n;if((n=e.originalEvent).dataTransfer&&n.dataTransfer.files&&(i=isImageForDrop(n)))return e.preventDefault(),t=n.dataTransfer.files[0].name||"image.png",pasteText("{{"+t+"(uploading...)}}"),uploadFile(i,t)})},pasteText=function(e){var i,n,o,a,r;return a=t[0].selectionStart,o=t[0].selectionEnd,r=t.val().length,n=t.val().substring(0,a),i=t.val().substring(o,r),t.val(n+e+i),t.get(0).setSelectionRange(a+e.length,o+e.length),t.trigger("input")},isImage=function(e){var t,i;for(t=0;t<e.clipboardData.items.length;){if(-1!==(i=e.clipboardData.items[t]).type.indexOf("image"))return i;t++}return!1},isImageForDrop=function(e){var t,i;for(t=0;t<e.dataTransfer.files.length;){if(-1!==(i=e.dataTransfer.files[t]).type.indexOf("image"))return i;t++}return!1},getFilename=function(e){var t;return window.clipboardData&&window.clipboardData.getData?t=window.clipboardData.getData("Text"):e.clipboardData&&e.clipboardData.getData&&(t=e.clipboardData.getData("text/plain")),(t=t.split("\r"))[0]},getMimeType=function(e,t){var i=e.type,n=t.substring(t.lastIndexOf(".")+1);return i!="image/"+n?"image/"+n:i},uploadFile=function(t,n){var o=new FormData;o.append("imageFile",t),o.append("mimeType",getMimeType(t,n)),e.ajax({url:i,data:o,type:"post",processData:!1,contentType:!1,dataType:"json",xhrFields:{withCredentials:!0},success:function(e){return e.success?insertToTextArea(n,e.message):replaceLoadingTest(n)},error:function(e,t){replaceLoadingTest(n),console.log(e.responseText)}})},insertToTextArea=function(e,i){return t.val(function(t,n){return n.replace("{{"+e+"(uploading...)}}","!["+e+"]("+i+")\n")})},replaceLoadingTest=function(e){return t.val(function(t,i){return i.replace("{{"+e+"(uploading...)}}",e+"\n")})}}(jQuery);